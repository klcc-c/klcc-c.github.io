<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"klcc.cc","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="Linux中最重要的三个命令在业界被称为“三剑客”，它们是grep，sed，awk。 我们知道Linux下一切皆文件，对Linux的操作就是对文件的处理，那么怎么能更好的处理文件呢？这就要用到我们的三剑客命令。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux三剑客">
<meta property="og:url" content="https://klcc.cc/bfa86649.html">
<meta property="og:site_name" content="klcc">
<meta property="og:description" content="Linux中最重要的三个命令在业界被称为“三剑客”，它们是grep，sed，awk。 我们知道Linux下一切皆文件，对Linux的操作就是对文件的处理，那么怎么能更好的处理文件呢？这就要用到我们的三剑客命令。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/gengff/blogimage/raw/master/images/awk.jpg">
<meta property="og:image" content="https://gitee.com/gengff/blogimage/raw/master/images/21-1.png">
<meta property="article:published_time" content="2021-12-24T17:09:13.000Z">
<meta property="article:modified_time" content="2021-12-31T01:16:20.348Z">
<meta property="article:author" content="klcc">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/gengff/blogimage/raw/master/images/awk.jpg">


<link rel="canonical" href="https://klcc.cc/bfa86649.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://klcc.cc/bfa86649.html","path":"bfa86649.html","title":"Linux三剑客"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Linux三剑客 | klcc</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?725ad6b586949dd6e89c022fb8d748f7"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">klcc</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">27</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">21</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">117</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.</span> <span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#linux%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bgrep"><span class="nav-number">2.</span> <span class="nav-text">linux三剑客之grep</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#linux%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bsed"><span class="nav-number">3.</span> <span class="nav-text">linux三剑客之sed</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B"><span class="nav-number">3.0.1.</span> <span class="nav-text">案例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#linux%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bawk"><span class="nav-number">4.</span> <span class="nav-text">linux三剑客之awk</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#awk%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%92%8C%E5%A4%84%E7%90%86%E8%A7%84%E5%88%99%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-number">4.1.</span> <span class="nav-text">awk的生命周期和处理规则的执行流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#awk%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">4.2.</span> <span class="nav-text">awk中的函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#awk%E4%B8%AD%E7%9A%84%E5%AE%9A%E4%BD%8D%E5%92%8C%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">4.3.</span> <span class="nav-text">awk中的定位和流程控制</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="klcc"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">klcc</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">117</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://klcc.cc/bfa86649.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="klcc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="klcc">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux三剑客
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
  
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-25 01:09:13" itemprop="dateCreated datePublished" datetime="2021-12-25T01:09:13+08:00">2021-12-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-31 09:16:20" itemprop="dateModified" datetime="2021-12-31T09:16:20+08:00">2021-12-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>9 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Linux中最重要的三个命令在业界被称为“<strong>三剑客</strong>”，它们是grep，sed，awk。</p>
<p>我们知道Linux下一切皆文件，对Linux的操作就是对文件的处理，那么怎么能更好的处理文件呢？这就要用到我们的三剑客命令。</p>
<span id="more"></span>
<ul>
<li>grep ：过滤文本</li>
<li>sed  :  修改文本</li>
<li>awk  :  处理文本</li>
</ul>
<p>使用这三个工具可以提升运维效率，熟练掌握好正则表达式是使用<code>Linux三剑客</code>的前提，在说三剑客前我们要插入一个小插曲就是“正则表达式”。在掌握好正则表达式后，将具体讲解三剑客的用法。</p>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>正则表达式：REGular EXPression, REGEXP。我们通过特定的字符串匹配模板，来获取到所需的内容。</p>
<p>Linux 三剑客以正则表达式作为基础，而在Linux系统中，支持两种正则表达式：</p>
<ul>
<li>标准正则表达式</li>
<li>扩展正则表达式</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">标准正则表达式：</span><br><span class="line">	</span><br><span class="line"> ^    <span class="comment">#以某字符开头</span></span><br><span class="line"> $    <span class="comment">#以某字符结尾</span></span><br><span class="line"> .    <span class="comment">#匹配除换行符之外的任意单个字符</span></span><br><span class="line"> *    <span class="comment">#匹配前导字符的任意个数</span></span><br><span class="line"> []   <span class="comment">#某组字符串的任意一个字符</span></span><br><span class="line"> [^]  <span class="comment">#取反</span></span><br><span class="line"> [a-z]    <span class="comment">#匹配小写字母</span></span><br><span class="line"> [A-Z]    <span class="comment">#匹配大写字母</span></span><br><span class="line"> [a-zA-Z] <span class="comment">#匹配字母</span></span><br><span class="line"> [0-9]    <span class="comment">#匹配数字</span></span><br><span class="line"> \      <span class="comment">#取消转义</span></span><br><span class="line"> ()     <span class="comment">#分组</span></span><br><span class="line"> \n     <span class="comment">#代表第n个分组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">扩展正则表达式：</span><br><span class="line"> &#123;&#125;     <span class="comment">#匹配的次数</span></span><br><span class="line"> &#123;n&#125;    <span class="comment">#匹配n次</span></span><br><span class="line"> &#123;n,&#125;   <span class="comment">#至少匹配n次</span></span><br><span class="line"> &#123;n,m&#125;  <span class="comment">#匹配 n 到 m 次</span></span><br><span class="line"> &#123;,m&#125;   <span class="comment">#最多匹配m次</span></span><br><span class="line">  +     <span class="comment">#匹配至少有一个前导字符</span></span><br><span class="line">  ?     <span class="comment">#匹配一个或零个前导字符</span></span><br><span class="line">  |     <span class="comment">#或</span></span><br></pre></td></tr></table></figure>



<h1 id="linux三剑客之grep"><a href="#linux三剑客之grep" class="headerlink" title="linux三剑客之grep"></a>linux三剑客之grep</h1><ul>
<li>文本过滤器（根据文本内容过滤文件）</li>
<li>grep命令家族由grep, egrep, fgrep 三个子命令组成，适用于不同的场景。具体如下：<ul>
<li>命令描述<ul>
<li>grep 原生的grep命令，使用“标准正则表达式”作为匹配标准。</li>
<li>egrep 扩展的grep命令，相当于<code>$(grep -E)</code>，使用“扩展正则表达式”作为匹配标准。</li>
<li>fgrep 简化版的grep命令，不支持正则表达式，但搜索速度快，系统资源使用率低。</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">  grep [参数] [匹配规则] [操作对象]</span><br><span class="line"></span><br><span class="line"> 参数：</span><br><span class="line">   -n  <span class="comment">#过滤文本时，将过滤出来的内容在文件内的行号显示出来</span></span><br><span class="line">   -A  <span class="comment">#匹配成功之后，将匹配行的后n行显示出来</span></span><br><span class="line">   -B  <span class="comment">#匹配成功之后，将匹配行的前n行显示出来</span></span><br><span class="line">   -C  <span class="comment">#匹配成功之后，将匹配行的前后各n行显示出来</span></span><br><span class="line">   -c  <span class="comment">#只显示匹配成功的行数</span></span><br><span class="line">   -o  <span class="comment">#只显示匹配成功的内容</span></span><br><span class="line">   -v  <span class="comment">#显示不包含匹配文本的所有行（反向过滤）</span></span><br><span class="line">   -q  <span class="comment">#静默输出(禁止输出任何结果，已退出状态表示搜索是否成功)</span></span><br><span class="line">   -i  <span class="comment">#搜索时，忽略大小写</span></span><br><span class="line">   -l  <span class="comment">#匹配成功之后，将文本的名称打印出来</span></span><br><span class="line">   -h	 <span class="comment">#查询多文件时不显示文件名</span></span><br><span class="line">   -b  <span class="comment">#打印匹配行距文件头部的偏移量，以字节为单位</span></span><br><span class="line">   -s	 <span class="comment">#不显示不存在、没有匹配文本的错误信息</span></span><br><span class="line">   -w  <span class="comment">#匹配整词</span></span><br><span class="line">   -x  <span class="comment">#匹配整行</span></span><br><span class="line">   -R|-r <span class="comment">#递归匹配 </span></span><br><span class="line">   -E    <span class="comment">#使用扩展正则,等价于 egrep</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">知识储备：</span><br><span class="line">  $?  <span class="comment">#上一行命令执行的结果，0代表执行成功，其他数字代表执行失败。</span></span><br><span class="line">  wc  <span class="comment">#匹配行数</span></span><br><span class="line">   参数：</span><br><span class="line">		-l  <span class="comment">#打印匹配行数</span></span><br><span class="line">		-c  <span class="comment">#打印匹配的字节数	</span></span><br><span class="line">	</span><br><span class="line">案例：</span><br><span class="line"> <span class="comment"># 在/etc目录下，有多少个文件包含root。</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># grep -rl &#x27;root&#x27; /etc/ | wc -l</span></span><br><span class="line">   130</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 在/etc/passwd文件中，匹配以ftp开头的行</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># grep &#x27;^root&#x27; /etc/passwd</span></span><br><span class="line">   root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 在/etc/passwd文件中，匹配以bash结尾的行,-n显示行号</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># grep -n &#x27;bash$&#x27; /etc/passwd</span></span><br><span class="line">   1:root:x:0:0:root:/root:/bin/bash</span><br><span class="line">   21:<span class="built_in">test</span>:x:1001:1001::/home/<span class="built_in">test</span>/:/bin/bash</span><br><span class="line">   22:gf:x:1002:1002::/home/gf:/bin/bash</span><br><span class="line">   28:tony:x:1004:1004::/home/tony:/bin/bash</span><br><span class="line">   29:user:x:1006:1001::/home/user:/bin/bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 匹配本机中有哪些ip</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># ip a | grep -oE &#x27;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&#x27;</span></span><br><span class="line">   127.0.0.1</span><br><span class="line">   192.168.15.100</span><br><span class="line">   192.168.15.255</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 要求将/etc/fstab中的去掉包含 # 开头的行，且要求 # 后至少有一个空格</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># grep -vE &#x27;^#\ +&#x27; /etc/fstab</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   /dev/mapper/centos-root /      xfs     defaults    0 0</span><br><span class="line">   UUID=9f8a98b0-805c-4adf-b9ef-517a2b527f89 /boot   xfs   defaults    0 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 找出文件中至少有一个空格的行</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># grep -E &#x27;\ +&#x27; 1.txt </span></span><br><span class="line">   11 11</span><br><span class="line">   22 22</span><br><span class="line">   5 5 5 5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 将 nginx.conf 文件中以#开头的行和空行，全部删除 </span></span><br><span class="line">  [root@localhost ~]<span class="comment"># grep -vE &#x27;^\ *#|^$&#x27; /etc/nginx/nginx.conf</span></span><br></pre></td></tr></table></figure>



<h1 id="linux三剑客之sed"><a href="#linux三剑客之sed" class="headerlink" title="linux三剑客之sed"></a>linux三剑客之sed</h1><ul>
<li><p>sed是一个流式编辑器，在处理行内容时功能十分强大。</p>
<ul>
<li><p>定位到某一行，将某一行的某一部分给替换掉</p>
</li>
<li><p>定位到某一行，然后删除</p>
</li>
<li><p>定位到某一行，在该行后添加新的配置</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line">语法格式</span><br><span class="line">  sed [参数] <span class="string">&#x27;处理规则&#x27;</span> [操作对象]</span><br><span class="line"></span><br><span class="line"> 参数</span><br><span class="line">   -n  <span class="comment">#取消默认输出</span></span><br><span class="line">   -e  <span class="comment">#允许多项编辑</span></span><br><span class="line">   -i  <span class="comment">#直接编辑源文件（把流向屏幕的内容写到文件中）</span></span><br><span class="line">   -r  <span class="comment">#支持扩展正则</span></span><br><span class="line">   -f  <span class="comment">#指定sed匹配规则脚本文件</span></span><br><span class="line"></span><br><span class="line"> 定位</span><br><span class="line"><span class="comment"># 1、行号定位法，指定行号定位</span></span><br><span class="line">  <span class="comment"># 不写代表定位所有行</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;&#x27; 1.txt </span></span><br><span class="line">   1111</span><br><span class="line">   2222</span><br><span class="line">   3333</span><br><span class="line">   4444</span><br><span class="line">   5555</span><br><span class="line">   </span><br><span class="line">  <span class="comment"># 3定位到第三行</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;3d&#x27; 1.txt   </span></span><br><span class="line">   1111</span><br><span class="line">   2222</span><br><span class="line">   4444</span><br><span class="line">   5555</span><br><span class="line">   </span><br><span class="line">  <span class="comment"># 2，3从第二行到第三行</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;2,3d&#x27; 1.txt </span></span><br><span class="line">   1111</span><br><span class="line">   4444</span><br><span class="line">   5555</span><br><span class="line">   </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 2、正则定位法，指定正则定位。</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;&#x27; 2.txt</span></span><br><span class="line">   gen111</span><br><span class="line">   222gen</span><br><span class="line">   333gen333</span><br><span class="line">   444xxx444</span><br><span class="line">   555gen555gen</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">  <span class="comment"># 删除包含gen的行</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;/gen/d&#x27; 2.txt </span></span><br><span class="line">   444xxx444</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">  <span class="comment"># 删除以gen开头的行</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;/^gen/d&#x27; 2.txt </span></span><br><span class="line">   222gen</span><br><span class="line">   333gen333</span><br><span class="line">   444xxx444</span><br><span class="line">   555gen555gen</span><br><span class="line">   </span><br><span class="line">  <span class="comment"># 删除以gen结尾的行</span></span><br><span class="line">	[root@localhost ~]<span class="comment"># sed &#x27;/gen$/d&#x27; 2.txt </span></span><br><span class="line">   gen111</span><br><span class="line">   333gen333</span><br><span class="line">   444xxx444</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、数字+正则定位法</span></span><br><span class="line">  <span class="comment"># 把1-3行的gen换成GEN</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;1,3s/gen/GEN/&#x27; 2.txt </span></span><br><span class="line">   GEN111</span><br><span class="line">   222GEN</span><br><span class="line">   333GEN333</span><br><span class="line">   444xxx444</span><br><span class="line">   555gen555gen</span><br><span class="line">   </span><br><span class="line">  <span class="comment"># 把所有的gen换成GEN</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;s/gen/GEN/g&#x27; 2.txt </span></span><br><span class="line">   GEN111</span><br><span class="line">   222GEN</span><br><span class="line">   333GEN333</span><br><span class="line">   444xxx444</span><br><span class="line">   555GEN555GEN</span><br><span class="line">   </span><br><span class="line">  <span class="comment"># 把所有的gen换成fen执行到文件中</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed -i &#x27;s/gen/fen/g&#x27; 2.txt </span></span><br><span class="line">  [root@localhost ~]<span class="comment"># cat 2.txt </span></span><br><span class="line">   fen111</span><br><span class="line">   222fen</span><br><span class="line">   333fen333</span><br><span class="line">   444xxx444</span><br><span class="line">   555fen555fen</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sed的编辑模式：</span><br><span class="line">  d ：删除 </span><br><span class="line">  p ：打印</span><br><span class="line">  a : 在当前行后添加一行</span><br><span class="line">  c ：用新文本修改（替换）当前行</span><br><span class="line">  i : 在当前行之前，插入文本（单独使用时）</span><br><span class="line">  r : 在文件中读内容</span><br><span class="line">  w : 将指定行写入文件</span><br><span class="line">  y : 将字符转换成另一个字符</span><br><span class="line">  s : 将字符串转换成另一个字符串（每一行只替换一次）</span><br><span class="line">  g : 全部执行</span><br><span class="line">  i : 忽略大小写（跟 s 模式一起使用时）	</span><br><span class="line">  &amp; ：代表前面匹配到的内容</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">	<span class="comment"># a模式：在第二行后面添加一行xxx</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;2axxx&#x27; 2.txt </span></span><br><span class="line">   fen111</span><br><span class="line">   222fen</span><br><span class="line">   xxx</span><br><span class="line">   333fen333</span><br><span class="line">   444xxx444</span><br><span class="line">   555fen555fen</span><br><span class="line"></span><br><span class="line">  <span class="comment"># c模式：将第一行的内容替换为xxx</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;1cxxx&#x27; 2.txt </span></span><br><span class="line">   xxx</span><br><span class="line">   222fen</span><br><span class="line">   333fen333</span><br><span class="line">   444xxx444</span><br><span class="line">   555fen555fen</span><br><span class="line"></span><br><span class="line">  <span class="comment"># i模式：在第五行之前插入xxx</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;5ixxx&#x27; 2.txt</span></span><br><span class="line">   fen111</span><br><span class="line">   222fen</span><br><span class="line">   333fen333</span><br><span class="line">   444xxx444</span><br><span class="line">   xxx</span><br><span class="line">   555fen555fen</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment"># r模式：将3.txt内容读到2.txt中第二行后显示</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;2r w.txt&#x27; 2.txt </span></span><br><span class="line">   fen111</span><br><span class="line">   222fen</span><br><span class="line">   hahaha</span><br><span class="line">   333fen333</span><br><span class="line">   444xxx444</span><br><span class="line">   555fen555fen</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment"># w模式：将第二行的内容写入w.txt 文件，文件不存在自动创建</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;2w w.txt&#x27; 2.txt </span></span><br><span class="line">  [root@localhost ~]<span class="comment"># cat w.txt </span></span><br><span class="line">   222fen</span><br><span class="line"></span><br><span class="line">  <span class="comment"># y模式：将第二行内容替换</span></span><br><span class="line">  [root@localhost ~]<span class="comment"># sed &#x27;2y/fe/FE/&#x27; 2.txt </span></span><br><span class="line">   fen111</span><br><span class="line">   222FEn</span><br><span class="line">   333fen333</span><br><span class="line">   444xxx444</span><br><span class="line">   555fen555fen</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1、将nginx.conf中的注释行全部去掉</span><br><span class="line">   [root@localhost ~]<span class="comment"># sed &#x27;/^ *#/d&#x27; /etc/nginx/nginx.conf</span></span><br><span class="line"></span><br><span class="line">2、将nginx.conf中每一行之前增加注释</span><br><span class="line">   [root@localhost ~]<span class="comment"># sed &#x27;s/.*/# &amp;/g&#x27; /etc/nginx/nginx.conf</span></span><br><span class="line"></span><br><span class="line">3、要求一键修改本机的ip，</span><br><span class="line">   192.168.15.100 ---&gt; 192.168.15.101</span><br><span class="line">   172.16.1.100   ---&gt; 172.16.1.101</span><br><span class="line">   sed -i <span class="string">&#x27;s#.100#.101#g&#x27;</span> /etc/sysconfig/network-scripts/ifcfg-eth[01]</span><br><span class="line">	</span><br><span class="line">4、将/etc/passwd中的root修改成ROOT</span><br><span class="line">   sed -i <span class="string">&#x27;s#root#ROOT#g&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure>

<h1 id="linux三剑客之awk"><a href="#linux三剑客之awk" class="headerlink" title="linux三剑客之awk"></a>linux三剑客之awk</h1><p><img src="https://gitee.com/gengff/blogimage/raw/master/images/awk.jpg" alt="awk"></p>
<ul>
<li><p>awk是一个强大的Linux命令，有强大的文本格式化的能力。相对于grep的查找，sed的编辑，awk在其对数据分析并生成报告时，显得尤为强大。简单来说awk就是把文件逐行的读入，以空格为默认分隔符将每行切片，切开的部分再进行各种分析处理。</p>
<p>awk其名称得自于它的创始人 Alfred Aho 、Peter Weinberger 和 Brian Kernighan 姓氏的首个字母。实际上 AWK 的确拥有自己的语言： AWK 程序设计语言 ， 三位创建者已将它正式定义为“样式扫描和处理语言”。它允许您创建简短的程序，这些程序读取输入文件、为数据排序、处理数据、对输入执行计算以及生成报表，还有无数其他的功能</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">  awk [选项]  <span class="string">&#x27;模式&#123;动作&#125;&#x27;</span> [文件信息]</span><br><span class="line">	awk [参数]  [处理规则] [操作对象]</span><br><span class="line"></span><br><span class="line">  参数</span><br><span class="line">   -F  <span class="comment">#指定文本分隔符（默认是以空格作为分隔符）</span></span><br><span class="line"></span><br><span class="line">案例：   </span><br><span class="line"> <span class="comment"># 准备文本文件  </span></span><br><span class="line"> [root@localhost ~]<span class="comment"># cat 3.txt </span></span><br><span class="line">  test1d test2f test3y</span><br><span class="line">  test4d test5f test6y</span><br><span class="line">  test7d test7f test9y</span><br><span class="line"> <span class="comment"># 以字符d为分割符</span></span><br><span class="line"> [root@localhost ~]<span class="comment"># awk -F&#x27;d&#x27; &#x27;&#123;print $NF&#125;&#x27; 3.txt </span></span><br><span class="line">  test2f test3y</span><br><span class="line">  test5f test6y</span><br><span class="line">  test7f test9y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">案例：打印系统所有用户的解析器</span><br><span class="line">   [root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print $NF&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line"></span><br><span class="line"><span class="comment"># awk中的内置变量</span></span><br><span class="line">	<span class="variable">$0</span> : 代表当前行</span><br><span class="line">		[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print $0, &quot;---&quot;&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">	<span class="variable">$n</span> : 代表第n列</span><br><span class="line">		[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print $1&#125;&#x27; /etc/passwd	</span></span><br><span class="line">		</span><br><span class="line">	NF : 记录当前行的字段数</span><br><span class="line">		[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print NF&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">	<span class="variable">$NF</span> : 代表最后一列</span><br><span class="line">		[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print $NF&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">	NR : 用来记录行号</span><br><span class="line">		[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print NR&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">	FS : 指定文本内容分隔符（默认是空格）<span class="comment"># FS 的优先级要高于 -F</span></span><br><span class="line">		[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;FS=&quot;:&quot;&#125;&#123;print $NF, $1&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">	OFS : 指定打印分隔符（默认空格）</span><br><span class="line">		[root@localhost ~]<span class="comment"># awk -F: &#x27;BEGIN&#123;OFS=&quot; &gt;&gt;&gt; &quot;&#125;&#123;print $NF, $1&#125;&#x27; /etc/passwd</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="awk的生命周期和处理规则的执行流程"><a href="#awk的生命周期和处理规则的执行流程" class="headerlink" title="awk的生命周期和处理规则的执行流程"></a>awk的生命周期和处理规则的执行流程</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># awk的生命周期和</span></span><br><span class="line">  grep、sed 和 awk 都是读一行处理一行，直至处理完成。</span><br><span class="line">	</span><br><span class="line">  ① 接收一行作为输入</span><br><span class="line">  ② 把刚刚读入进来得到文本进行分解</span><br><span class="line">  ③ 使用处理规则处理文本</span><br><span class="line">  ④ 输入一行，赋值给<span class="variable">$0</span>，直至处理完成</span><br><span class="line">  ⑤ 把处理完成之后的所有的数据交给END&#123;&#125;来再次处理</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># awk处理规则的执行流程</span></span><br><span class="line"> awk [参数][分隔符] <span class="string">&#x27;&#123;BEGIN&#123;开始初需要的处理&#125;/定位/&#123;循环&#125;END&#123;结束前需要的处理&#125;&#125;&#x27;</span> [操作对象]</span><br><span class="line">   BEGIN&#123;&#125; <span class="comment">#开始语句：定义变量在BEGIN块里面		 </span></span><br><span class="line">    //     <span class="comment">#定位：正则匹配</span></span><br><span class="line">    &#123;&#125;     <span class="comment">#循环语句：循环处理文本</span></span><br><span class="line">   END&#123;&#125;   <span class="comment">#结束语句：打印之前统一处理</span></span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/gengff/blogimage/raw/master/images/21-1.png" alt="21-1"></p>
<h2 id="awk中的函数"><a href="#awk中的函数" class="headerlink" title="awk中的函数"></a>awk中的函数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只能用于循环语句和结束语句</span></span><br><span class="line">  <span class="built_in">print</span> : 打印</span><br><span class="line">  <span class="built_in">printf</span> : 格式化打印</span><br><span class="line">   参数：</span><br><span class="line">      %s  <span class="comment">#字符串</span></span><br><span class="line">      %d  <span class="comment">#数字</span></span><br><span class="line">       -  <span class="comment">#左对齐</span></span><br><span class="line">       +  <span class="comment">#右对齐</span></span><br><span class="line">      15  <span class="comment">#至少占用15字符</span></span><br><span class="line"> [root@localhost ~]<span class="comment"># awk -F: &#x27;BEGIN&#123;OFS=&quot; | &quot;&#125;&#123;printf &quot;|%+15s|%-15s|\n&quot;, $NF,$1&#125;&#x27; /etc/passwd</span></span><br><span class="line">  |      /bin/bash|root           |</span><br><span class="line">  |  /sbin/nologin|bin            |</span><br><span class="line">  |  /sbin/nologin|daemon         |</span><br><span class="line">  |  /sbin/nologin|adm            |</span><br><span class="line">  |  /sbin/nologin|lp             |</span><br><span class="line">  |      /bin/sync|sync           |</span><br><span class="line">  | /sbin/shutdown|shutdown       |</span><br><span class="line">  |     /sbin/halt|halt           |</span><br><span class="line">  |  /sbin/nologin|mail           |</span><br><span class="line">  |  /sbin/nologin|operator       |</span><br><span class="line">  |  /sbin/nologin|games          |</span><br><span class="line">......</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="awk中的定位和流程控制"><a href="#awk中的定位和流程控制" class="headerlink" title="awk中的定位和流程控制"></a>awk中的定位和流程控制</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># awk中的定位</span></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 1、正则表达式</span></span><br><span class="line">   <span class="comment"># 打印含root所在行的所有内容</span></span><br><span class="line">   [root@localhost ~]<span class="comment"># awk -F: &#x27;/root/&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 打印以root开头所在行的所有内容</span></span><br><span class="line">   [root@localhost ~]<span class="comment"># awk -F: &#x27;/^root/&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 2、比较表达式</span></span><br><span class="line">    &gt;   <span class="comment">#大于</span></span><br><span class="line">    &lt;   <span class="comment">#小于</span></span><br><span class="line">    &gt;=  <span class="comment">#大于等于</span></span><br><span class="line">    &lt;=  <span class="comment">#小于等于</span></span><br><span class="line">    ~	  <span class="comment">#表示匹配后面的正则表达式</span></span><br><span class="line">    !~  <span class="comment">#表示匹配后面的正则表达式</span></span><br><span class="line">		</span><br><span class="line">  案例：要求打印属组ID大于属主ID的行</span><br><span class="line">   [root@localhost ~]<span class="comment"># awk -F: &#x27;$4 &gt; $3&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">  案例：结尾包含bash</span><br><span class="line">   [root@localhost ~]<span class="comment"># awk -F: &#x27;$NF ~ /bash/&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">  案例：结尾不包含bash</span><br><span class="line">   [root@localhost ~]<span class="comment"># awk -F: &#x27;$NF !~ /bash/&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">  <span class="comment"># 3、逻辑表达式</span></span><br><span class="line">   &amp;&amp;	<span class="comment">#与</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;$3 + $4 &gt; 2000 &amp;&amp; $3 * $4 &gt; 2000&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">   </span><br><span class="line">   || <span class="comment">#或</span></span><br><span class="line">   </span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;$3 + $4 &gt; 2000 || $3 * $4 &gt; 2000&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">   !  <span class="comment">#非</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;!($3 + $4 &gt; 2000)&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">  <span class="comment"># 4、算术表达式</span></span><br><span class="line">    +  <span class="comment">#加</span></span><br><span class="line">    -  <span class="comment">#减</span></span><br><span class="line">    *  <span class="comment">#乘</span></span><br><span class="line">    /  <span class="comment">#除</span></span><br><span class="line">    %  <span class="comment">#取余</span></span><br><span class="line"></span><br><span class="line">   案例：要求属组 + 属主的ID 大于 2000</span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;$3 + $4 &gt; 2000&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">    </span><br><span class="line">   案例：要求属组 * 属主的ID 大于 2000</span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;$3 * $4 &gt; 2000&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">    </span><br><span class="line">   案例：要求打印偶数行</span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;NR % 2 == 0&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">    </span><br><span class="line">   案例：要求打印奇数行</span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;NR % 2 == 1&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">			</span><br><span class="line">  <span class="comment"># 5、条件表达式</span></span><br><span class="line">    ==  <span class="comment">#等于</span></span><br><span class="line">    &gt;   <span class="comment">#大于</span></span><br><span class="line">    &lt;   <span class="comment">#小于</span></span><br><span class="line">    &gt;=  <span class="comment">#大于等于</span></span><br><span class="line">    &lt;=  <span class="comment">#小于等于</span></span><br><span class="line">    </span><br><span class="line">   案例：要求打印第三行</span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;NR == 3&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">  <span class="comment"># 6、范围表达式：一个选定条件到另一个选定条件之间的数据</span></span><br><span class="line">		案例： </span><br><span class="line">		[root@localhost ~]<span class="comment"># awk -F: &#x27;/^root/,/^ftp/&#123;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 流程控制</span></span><br><span class="line">  只存在循环之中。</span><br><span class="line">  <span class="keyword">if</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;if($3&gt;$4)&#123;print &quot;大于&quot;&#125;else&#123;print &quot;小于或等于&quot;&#125;&#125;&#x27; /etc/passwd</span></span><br><span class="line">			</span><br><span class="line">      <span class="function"><span class="title">if</span></span>()&#123;&#125;</span><br><span class="line">      <span class="function"><span class="title">if</span></span>()&#123;&#125;<span class="keyword">else</span>&#123;&#125;</span><br><span class="line">      <span class="function"><span class="title">if</span></span>()&#123;&#125;<span class="keyword">else</span> <span class="function"><span class="title">if</span></span>()&#123;&#125;<span class="keyword">else</span>&#123;&#125;</span><br><span class="line">  <span class="keyword">for</span></span><br><span class="line">		</span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;for(i=10;i&gt;0;i--)&#123;print $0&#125;&#125;&#x27; /etc/passwd</span></span><br><span class="line">		</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="string">&quot;初始值&quot;</span>;条件判断;游标)&#123;&#125;</span><br><span class="line">		</span><br><span class="line">  <span class="keyword">while</span></span><br><span class="line">	</span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;i=1; while(i&lt;10)&#123;print $0, i++&#125;&#125;&#x27; /etc/passwd</span></span><br><span class="line">	</span><br><span class="line">    <span class="keyword">while</span>(条件判断)&#123;&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">    每隔5行，打印一行横线</span><br><span class="line">    -------------------------------------------------------------------------</span><br><span class="line">    </span><br><span class="line">    [root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;if(NR%5==0)&#123;print &quot;----------------&quot;&#125;print $0&#125;&#x27; /etc/passwd</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/linux/" rel="tag"><i class="fa fa-tag"></i> linux</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/47edf33b.html" rel="prev" title="Linux文本处理和find命令">
                  <i class="fa fa-chevron-left"></i> Linux文本处理和find命令
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/20cf8e98.html" rel="next" title="Linux安装、远程连接">
                  Linux安装、远程连接 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">klcc</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">731k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">11:04</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdn.jsdelivr.net/npm/ribbon.js@1.0.2/dist/ribbon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
